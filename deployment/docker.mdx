---
title: Docker Setup
description: Run MachinaOs with Docker Compose
---

# Docker Setup

The easiest way to run MachinaOs is with Docker Compose.

## Prerequisites

- Docker 20.10+
- Docker Compose 2.0+
- 2GB RAM minimum

## Quick Start

```bash
# Clone the repository
git clone https://github.com/trohitg/MachinaOS.git
cd MachinaOs

# Build images
npm run docker:build

# Start all services
npm run docker:up
```

This starts 4 containers:
- **frontend** - React app on port 3000
- **backend** - FastAPI server on port 3010
- **whatsapp** - Go WhatsApp service on port 9400
- **redis** - Cache on port 6379 (optional)

## Container Overview

| Container | Image | Port | Purpose |
|-----------|-------|------|---------|
| frontend | machinaos-frontend | 3000 | React UI |
| backend | machinaos-backend | 3010 | API server |
| whatsapp | machinaos-whatsapp | 9400 | WhatsApp bridge |
| redis | redis:7-alpine | 6379 | Cache (optional) |

## Configuration

### Environment Variables

Create a `.env` file in the project root:

```bash
# Ports
VITE_CLIENT_PORT=3000
PYTHON_BACKEND_PORT=3010
WHATSAPP_RPC_PORT=9400

# Authentication
AUTH_MODE=single
JWT_SECRET_KEY=your-secret-key-min-32-chars

# Cache (optional)
REDIS_ENABLED=false

# AI API Keys (optional)
OPENAI_API_KEY=
ANTHROPIC_API_KEY=
```

### Redis (Optional)

Redis is disabled by default for local development. To enable:

```bash
# In .env
REDIS_ENABLED=true
```

Then start with Redis profile:

```bash
docker-compose --profile redis up -d
```

## Common Commands

```bash
# Start services
npm run docker:up

# View logs
npm run docker:logs

# Stop all services
npm run docker:down

# Rebuild after code changes
npm run docker:build && npm run docker:up

# Stop and remove volumes (clean slate)
docker-compose down -v

# View specific service logs
docker-compose logs -f backend

# Restart specific service
docker-compose restart backend
```

## Accessing Services

After starting, access:

| Service | URL |
|---------|-----|
| Frontend | http://localhost:3000 |
| Backend API | http://localhost:3010 |
| Health Check | http://localhost:3010/health |
| WebSocket | ws://localhost:3010/ws/status |

## Health Checks

All containers include health checks:

```bash
# Check container health
docker-compose ps

# Check backend health
curl http://localhost:3010/health
```

Expected health response:
```json
{
  "status": "healthy",
  "redis_enabled": false,
  "version": "1.0.0"
}
```

## Troubleshooting

<Accordion title="Container won't start">
  Check logs for errors:
  ```bash
  docker-compose logs backend
  docker-compose logs frontend
  ```

  Common issues:
  - Port already in use: Change port in `.env`
  - Missing environment variables: Check `.env` file exists
</Accordion>

<Accordion title="Frontend can't connect to backend">
  - Verify both containers are running: `docker-compose ps`
  - Check network: containers should be on same network
  - Check CORS settings in backend `.env`
</Accordion>

<Accordion title="WhatsApp service issues">
  ```bash
  # Check WhatsApp logs
  docker-compose logs whatsapp

  # Restart WhatsApp service
  docker-compose restart whatsapp
  ```
</Accordion>

<Accordion title="Out of disk space">
  Clean up Docker resources:
  ```bash
  docker system prune -af
  docker builder prune -af
  ```
</Accordion>

## Resource Usage

Typical resource consumption:

| Container | Memory | CPU |
|-----------|--------|-----|
| frontend | ~50 MB | Low |
| backend | ~150 MB | Medium |
| whatsapp | ~30 MB | Low |
| redis | ~10 MB | Low |

## Data Persistence

Data is stored in Docker volumes:

| Volume | Purpose |
|--------|---------|
| backend-data | SQLite database, uploads |
| whatsapp-data | WhatsApp session |
| redis-data | Cache data |

To backup data:
```bash
docker cp machinaos-backend-1:/app/data ./backup
```

## Development Mode

For development with hot reload:

```bash
# Use development compose file
docker-compose -f docker-compose.dev.yml up
```

Or run services separately:
```bash
npm run dev  # Starts frontend + backend with hot reload
```

## Next Steps

<CardGroup cols={2}>
  <Card title="Production Deployment" icon="server" href="/deployment/production">
    Deploy to a server with nginx and SSL
  </Card>
  <Card title="Configuration" icon="gear" href="/installation">
    Full environment variable reference
  </Card>
</CardGroup>
